CREATE VIEW `wb4_mailinglistaddresses_notopts` AS (select distinct `u`.`email` AS `address`,`u`.`username` AS `username`,`m`.`address` AS `mailinglist`,`m`.`id` AS `mailinglist_id`,`m`.`event_id` AS `event_id`,`e`.`reference` AS `event_reference`,`u`.`realname` AS `realname`,`m`.`optional` AS `optional` from ((((`wb4_users` `u` join `wb4_crews_users` `uc`) join `wb4_mailinglistrules` `mr`) join `wb4_mailinglists` `m`) join `wb4_events` `e`) where ((`u`.`id` = `uc`.`user_id`) and (`mr`.`crew_id` = `uc`.`crew_id`) and (`mr`.`action` = 'add') and (`uc`.`leader` >= `mr`.`leader`) and (`m`.`id` = `mr`.`mailinglist_id`) and (`e`.`id` = `m`.`event_id`))) union (select distinct `u`.`email` AS `address`,`u`.`username` AS `username`,`m`.`address` AS `mailinglist`,`m`.`id` AS `mailinglist_id`,`m`.`event_id` AS `event_id`,`e`.`reference` AS `event_reference`,`u`.`realname` AS `realname`,`m`.`optional` AS `optional` from ((((`wb4_users` `u` join `wb4_crews_users` `uc`) join `wb4_mailinglistrule_teams` `mr`) join `wb4_mailinglists` `m`) join `wb4_events` `e`) where ((`u`.`id` = `uc`.`user_id`) and (`mr`.`team_id` = `uc`.`team_id`) and (`mr`.`action` = 'add') and (`m`.`id` = `mr`.`mailinglist_id`) and (`e`.`id` = `m`.`event_id`))) union (select distinct `u`.`email` AS `address`,`u`.`username` AS `username`,`m`.`address` AS `mailinglist`,`m`.`id` AS `mailinglist_id`,`m`.`event_id` AS `event_id`,`e`.`reference` AS `event_reference`,`u`.`realname` AS `realname`,`m`.`optional` AS `optional` from ((((`wb4_users` `u` join `wb4_crews_users` `uc`) join `wb4_mailinglistrule_users` `mr`) join `wb4_mailinglists` `m`) join `wb4_events` `e`) where ((`u`.`id` = `uc`.`user_id`) and (`mr`.`user_id` = `uc`.`user_id`) and (`mr`.`action` = 'add') and (`m`.`id` = `mr`.`mailinglist_id`) and (`e`.`id` = `m`.`event_id`)))
